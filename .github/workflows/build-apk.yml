name: Generate APK
on:
  push:
    branches: [ main ]
  workflow_dispatch:
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Code
        uses: actions/checkout@v3
      - name: Build APK via PWABuilder API
        run: |
          # This connects to the PWABuilder cloud to build your APK perfectly
          curl -X POST https://pwabuilder-cloud-apk.azurewebsites.net/process \
          -H "Content-Type: application/json" \
          -d '{
            "url": "https://sreeesreejith-jpg.github.io/dcrg-apk/",
            "name": "Pension Calc",
            "packageId": "com.sree.pensioncalc",
            "versionCode": 1,
            "versionName": "1.0.0"
          }' --output pension-app.zip
      - name: Upload APK Zip
        uses: actions/upload-artifact@v3
        with:
          name: pension-app-package
          path: pension-app.zip
